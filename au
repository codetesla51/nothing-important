#!/bin/bash

# Check if Git repository is initialized
if [ -d .git ]; then
    echo "Git repository already initialized."
else
    echo "Initializing a new Git repository..."
    git init
fi

# Create a file to commit
file_name="hello_world.txt"
touch "$file_name"

# Set the start date
start_date="2023-01-01"

# Loop over 64 days
for day in {0..64}; do
    # Randomly decide whether to commit on this day
    if (( RANDOM % 2 == 0 )); then
        echo "Skipping commits for day $day"
        continue
    fi

    # Set the commit date for the day
    current_date=$(date -d "$start_date + $day days" +%Y-%m-%dT12:00:00)
    
    # Make a random number of commits (1-10) for the selected day
    num_commits=$(( RANDOM % 20 + 1 ))
    
    for ((i=1; i<=num_commits; i++)); do
        echo "Hello, world!" >> "$file_name"

        git add "$file_name"
        GIT_COMMITTER_DATE="$current_date" GIT_AUTHOR_DATE="$current_date" git commit -m "New commit added on $current_date"

        echo "New commit added on $current_date"
    done
done

# Push commits to the remote branch, assuming 'origin' and 'main' as defaults
echo "Pushing commits to remote repository..."
git push origin main || echo "Failed to push. Check your network or remote configuration."
